# modules/storage/watcherService.js

## Описание

Сервис отслеживания изменений файловой системы Electron приложения Likbez. Отвечает за мониторинг изменений в директории данных с дебаунсом.

## Основные функции

### constructor()

Инициализирует сервис отслеживания:

- watcher: экземпляр файлового watcher'а
- _watcherTimeout: таймаут для дебаунса
- callback: функция обратного вызова для уведомлений

### start(rootPath, callback)

Запускает отслеживание изменений:

- Останавливает предыдущий watcher
- Сохраняет callback для уведомлений
- Создает файловый watcher с рекурсивным отслеживанием
- Реализует дебаунс 500мс для уменьшения количества уведомлений
- Обрабатывает ошибки с логированием

### stop()

Останавливает отслеживание изменений:

- Закрывает файловый watcher
- Очищает таймаут дебаунса
- Сбрасывает внутренние переменные

## Особенности реализации

### Дебаунс
Использует таймаут 500мс для группировки множественных изменений в одной директории, чтобы уменьшить количество уведомлений.

### Рекурсивное отслеживание
Watcher настроен с опцией { recursive: true } для отслеживания изменений во всех поддиректориях.

### Безопасная остановка
Метод stop безопасно обрабатывает ошибки при закрытии watcher'а.

## Импорты

- fs: модуль для работы с файловой системой и создания watcher'а