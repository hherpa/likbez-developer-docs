# Sidebar Component Documentation

## Описание
Sidebar - это компонент боковой панели приложения, который предоставляет основной интерфейс для навигации, создания узлов и управления настройками. Компонент поддерживает изменение размера, сворачивание и темизацию.

## Экспортируемые компоненты
- `Sidebar` - основной компонент боковой панели

## Структура компонента
1. **Кнопка расширения**:
   - Отображается при свернутом состоянии
   - Позволяет раскрыть боковую панель

2. **Основная панель**:
   - Заголовок с названием приложения "Likbez"
   - Область содержимого для дочерних компонентов
   - Секция создания узлов с кнопками перетаскивания
   - Кнопка возврата
   - Файловый проводник
   - Футер с кнопкой настроек

3. **Меню настроек**:
   - Модальное окно настроек
   - Управляется через состояние showSettings

## Взаимодействия
- Управление размером панели с помощью перетаскивания (resize handle)
- Состояние свернутой панели (isCollapsed)
- Обработчики изменения размера:
  - `handleMouseDown` - начало перетаскивания
  - `handleMouseMove` - изменение ширины
  - `handleMouseUp` - завершение перетаскивания
  - `handleExpandClick` - раскрытие свернутой панели
- Использует `useSettings` для получения информации об уровнях
- Инференция индекса уровня через `inferStageIndex`
- Управление отображением разрешенных типов узлов
- Интеграция с дочерними компонентами:
  - `DropButton` для создания узлов
  - `BackButton` для навигации
  - `FileExplorer` для просмотра структуры файлов
  - `SettingsMenu` для управления настройками

## Зависимости
- React (useMemo, useState, useRef, useCallback, useLayoutEffect)
- `DropButton` из './DropButton'
- `FileExplorer` из './FileExplorer'
- `BackButton` из './BackButton'
- `SettingsMenu` из '../settings/SettingsMenu'
- `Icons` из './style/Icons'
- `useSettings` из '../settings/SettingsProvider'
- CSS стили из './style/index.css'

## Архитектура
Компонент реализует паттерн функционального компонента React с расширенным управлением состоянием и взаимодействиями. Компонент инкапсулирует всю логику управления размером панели, включая обработчики глобальных событий мыши для плавного изменения размера. Реализована система сворачивания панели с кнопкой для раскрытия. Компонент использует мемоизацию для оптимизации вычислений индекса уровня и ключа уровня. Поддерживает темизацию через пропс darkMode. Интегрирует различные дочерние компоненты для предоставления полного функционала боковой панели. Следует принципам композиции React, принимая дочерние компоненты через пропс children для гибкой настройки содержимого.