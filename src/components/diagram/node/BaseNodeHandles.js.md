# BaseNodeHandles

## Назначение компонента

Класс `BaseNodeHandles` отвечает за логику стандартных handles (точек соединения) узлов в диаграмме. Он управляет отображением, стилями и позиционированием стандартных handles узлов, которые используются для создания соединений между узлами в диаграмме.

**Важно:** Не путать с handle-элементами из редактора - это отдельная система соединений в визуальном представлении узлов.

## Основные функции и методы

### Основные методы класса:

- `shouldShowHandles(data)` - определяет, нужно ли показывать стандартные handles
- `getHandleStyles(data)` - возвращает стили для handles на основе данных узла
- `getHandlePositions()` - получает позиции handles из конфигурации
- `renderHandles(data)` - рендерит стандартные handles узла

### Экспортируемые константы:

- `DEFAULT_HANDLE_POSITIONS` - стандартные позиции handles
- `DEFAULT_HANDLE_STYLES` - стандартные стили handles

## Структура и логика работы с handles

### Стандартные handles:
- **target (input)** - точка входа, расположена слева
- **source (output)** - точка выхода, расположена справа

### Логика отображения:
1. Проверяется конфигурация `showHandles`
2. Анализируется содержимое узла на наличие кастомных handle элементов
3. Если есть кастомные handles, стандартные не отображаются
4. В противном случае отображаются стандартные handles

### Стилизация:
- Светлый нейтральный цвет (`#d1d5db`)
- При выделении соединения цвет становится темнее (`#94a3b8`)
- Круглая форма (border-radius: 50%)
- Плавный переход цвета (transition)

## Взаимодействие с другими компонентами

### Зависимости:
- `react` - основной фреймворк
- `reactflow` - библиотека для создания диаграмм (компоненты Handle, Position)
- `parseMarkdownContent` из `../../editor/system/parser` - для анализа содержимого узла

### Интеграция:
- Используется в компоненте BaseNode для отображения handles
- Работает с системой парсинга содержимого узлов для определения кастомных handles
- Связан с системой выделения соединений через `selectedEdge`

## Используемые зависимости

```javascript
import React from 'react';
import { Handle, Position } from 'reactflow';
import { parseMarkdownContent } from '../../editor/system/parser';
```

### Внешние библиотеки:
- **React** - для создания компонентов
- **ReactFlow** - для работы с диаграммами и handles
- **Внутренний парсер** - для анализа содержимого узлов

## Пример использования:

```javascript
// Создание экземпляра класса
const handlesManager = new BaseNodeHandles(config);

// Рендер handles в компоненте узла
const handles = handlesManager.renderHandles(nodeData);
```

## Конфигурация:

Класс принимает объект конфигурации с параметрами:
- `showHandles` - флаг отображения handles
- `handlePositions` - позиции handles (target/source)