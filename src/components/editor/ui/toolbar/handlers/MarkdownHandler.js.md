# MarkdownHandler.js

## Назначение
Обработчик markdown разметки в тулбаре редактора, отвечающий за вставку и обработку различных элементов markdown разметки.

## Экспортируемые компоненты
- `createMarkdownHandler` - основная функция создания обработчика markdown разметки

## Структура
1. Импорты констант, утилит и обновляторов
2. Функция `createMarkdownHandler` для создания обработчика markdown разметки

## Взаимодействия
1. Принимает ref элемента редактирования, элемент, позицию, оригинальный контент и функции обновления
2. Создает функцию обработки markdown типов
3. Получает выделенный текст из selection
4. Проверяет возможность работы без выделения для определенных типов
5. Обрабатывает специальные случаи (параграфы, заголовки)
6. Форматирует текст с использованием шаблонов
7. Обновляет contentEditable и markdown контент
8. Управляет отображением плавающего тулбара

## Зависимости
- `../../../constants` - для получения шаблонов и текстов по умолчанию
- `MarkdownUpdater.js` - для обновления контента с markdown
- `ContentEditableUtils.js` - для работы с contentEditable
- `Logger.js` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за обработку markdown разметки. Использует стратегию шаблонов для различных типов markdown.

Функция `createMarkdownHandler` реализует логику:
1. Создает функцию обработки markdown типов
2. Получает selection и range
3. Определяет выделенный текст
4. Проверяет возможность работы без выделения
5. Обрабатывает специальные случаи (параграфы)
6. Использует шаблоны для форматирования текста
7. Обновляет contentEditable с форматированным текстом
8. Вызывает обновление markdown контента
9. Обновляет значение редактирования
10. Скрывает плавающий тулбар