# ColorElementHandler.js

## Назначение
Обработчик цветовых элементов в редакторе, отвечающий за вставку и управление цветовыми элементами.

## Экспортируемые компоненты
- `handleColorElement` - основная функция обработки цветовых элементов
- `insertColorElementInContentEditable` - функция вставки цветового элемента в contentEditable

## Структура
1. Функция `handleColorElement` для обработки вставки цветового элемента
2. Функция `insertColorElementInContentEditable` для визуальной вставки элемента

## Взаимодействия
1. Принимает тип элемента, контент, целевую строку и массив строк
2. Удаляет выделенный текст из markdown
3. Вставляет обернутый текст обратно в строку
4. Обрабатывает вставку в contentEditable элемент

## Зависимости
- `TextRemover.js` - для удаления текста из markdown
- `ElementInserter.js` - для построения текста вставки
- `Logger.js` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за обработку цветовых элементов. Объединен с ColorElementInserter для устранения дублирования.

Функция `handleColorElement` реализует логику:
1. Проверяет наличие контента
2. Строит текст для вставки
3. Удаляет выделенный текст из markdown
4. Вставляет обернутый текст обратно в строку
5. Обрабатывает случаи пустой строки и отсутствия текста

Функция `insertColorElementInContentEditable` реализует визуальную вставку:
1. Проверяет наличие контента и ref элемента
2. Получает выделение из window
3. Создает текстовый узел с вставляемым текстом
4. Вставляет узел в выделение
5. Устанавливает курсор после вставленного текста