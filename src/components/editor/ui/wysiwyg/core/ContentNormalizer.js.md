# ContentNormalizer.js

## Назначение
Модуль для нормализации структуры markdown контента в редакторе, обеспечивающий правильное форматирование и разбиение строк.

## Экспортируемые компоненты
- `normalizeContent` - основная функция нормализации контента

## Структура
1. Функция `normalizeContent` для нормализации контента
2. Вспомогательная функция `splitLineIntoParts` для разбиения строк на части

## Взаимодействия
1. Принимает строку контента
2. Разбивает контент на строки
3. Проверяет каждую строку на наличие элементов
4. Разбивает строки с элементами на отдельные части
5. Возвращает нормализованный контент

## Зависимости
- Нет внешних зависимостей

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за нормализацию контента. Использует вспомогательную функцию для разбиения строк.

Функция `normalizeContent` реализует логику:
1. Проверяет валидность входного контента
2. Разбивает контент на строки
3. Обрабатывает каждую строку:
   - Пропускает пустые строки
   - Проверяет наличие элементов (кроме цветов и inline LaTeX)
   - Разбивает строки с элементами на части
   - Оставляет строки без изменений, если они содержат только элемент
4. Возвращает нормализованный контент

Функция `splitLineIntoParts` реализует логику:
1. Определяет паттерны для поиска элементов
2. Находит все элементы в строке
3. Сортирует элементы по позиции
4. Разбивает строку на части: текст до элементов, элементы, текст после элементов
5. Возвращает массив частей строки