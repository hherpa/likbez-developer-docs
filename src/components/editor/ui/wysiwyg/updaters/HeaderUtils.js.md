# HeaderUtils.js

## Назначение
Утилиты для обработки заголовков в редакторе, обеспечивающие работу с уровнями заголовков и обновление строк заголовков.

## Экспортируемые компоненты
- `getHeaderPrefix` - получение префикса заголовка по типу
- `detectHeaderLevel` - определение уровня заголовка по тексту
- `updateHeaderLine` - обновление строки заголовка

## Структура
1. Константы префиксов заголовков
2. Функция `getHeaderPrefix` для получения префикса
3. Функция `detectHeaderLevel` для определения уровня заголовка
4. Функция `updateHeaderLine` для обновления строки заголовка

## Взаимодействия
1. Работает со строками текста
2. Использует регулярные выражения для определения уровня заголовка
3. Работает с массивом строк для обновления конкретной строки
4. Использует математические функции для ограничения уровня заголовка

## Зависимости
- Нет внешних зависимостей

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за работу с заголовками.

Функция `getHeaderPrefix` реализует логику:
1. Возвращает префикс заголовка по типу из констант
2. Возвращает '# ' по умолчанию

Функция `detectHeaderLevel` реализует логику:
1. Проверяет валидность входного текста
2. Удаляет пробелы по краям
3. Использует регулярное выражение для поиска префикса заголовка
4. Определяет уровень по количеству символов '#'
5. Ограничивает уровень диапазоном 1-3
6. Возвращает уровень 1 по умолчанию

Функция `updateHeaderLine` реализует логику:
1. Определяет уровень заголовка через detectHeaderLevel
2. Получает префикс заголовка через getHeaderPrefix
3. Удаляет префиксы заголовков из нового текста
4. Если текст без префикса пустой, добавляет префикс с пробелом
5. Иначе добавляет префикс к тексту без префикса
6. Обновляет строку в массиве строк