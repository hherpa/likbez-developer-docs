# ElementInserter.js

## Назначение
Модуль для вставки элементов в контент редактора, отвечающий за формирование текста вставки и вставку элементов в массив строк.

## Экспортируемые компоненты
- `getElementTemplate` - получение шаблона для элемента
- `buildElementInsertText` - формирование текста для вставки элемента с использованием шаблона
- `buildInsertText` - формирование текста для вставки элемента
- `insertElementAfterLine` - вставка элемента в массив строк

## Структура
1. Импорты констант и логгера
2. Функция `getElementTemplate` для получения шаблона элемента
3. Функция `buildElementInsertText` для формирования текста вставки с шаблоном
4. Функция `buildInsertText` для формирования текста вставки
5. Функция `insertElementAfterLine` для вставки элемента в массив строк

## Взаимодействия
1. Использует константы для получения шаблонов и текстов по умолчанию
2. Работает с массивами строк для вставки элементов
3. Использует логгер для отладки
4. Принимает тип элемента, содержимое и индекс строки
5. Возвращает сформированный текст для вставки

## Зависимости
- `../../../constants` - для получения шаблонов, текстов по умолчанию и поддерживаемых цветов
- `Logger.js` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за вставку элементов. Объединен с ElementTemplateResolver для устранения дублирования.

Функция `getElementTemplate` реализует логику:
1. Получает шаблон и текст по умолчанию из TAG_TEMPLATES и DEFAULT_TEXTS
2. Если шаблон не найден, проверяет является ли элемент цветовым
3. Для цветовых элементов использует соответствующие шаблоны
4. Возвращает объект с шаблоном и текстом по умолчанию

Функция `buildElementInsertText` реализует логику:
1. Проверяет наличие шаблона
2. Определяет текст для вставки (содержимое или текст по умолчанию)
3. Формирует текст вставки в зависимости от типа элемента:
   - Цветовые элементы
   - Элементы фонового цвета
   - Остальные элементы

Функция `buildInsertText` реализует логику:
1. Получает шаблон и текст по умолчанию через getElementTemplate
2. Проверяет наличие шаблона
3. Логирует процесс формирования текста
4. Формирует текст вставки в зависимости от типа элемента

Функция `insertElementAfterLine` реализует логику:
1. Определяет индекс вставки (после указанной строки)
2. Проверяет, не пустая ли следующая строка
3. Если пустая, заменяет ее
4. Иначе вставляет новую строку