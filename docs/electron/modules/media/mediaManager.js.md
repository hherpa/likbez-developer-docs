# modules/media/mediaManager.js

## Описание

Менеджер медиафайлов Electron приложения Likbez. Координирует работу с медиафайлами, делегируя операции репозиторию и сканеру медиафайлов.

## Основные функции

### constructor()

Инициализирует менеджер медиафайлов:

- Создает экземпляр MediaRepository
- Создает экземпляр MediaScanner

### openMedia(relPath)

Открывает медиафайл:

- Делегирует вызов репозиторию

### chooseAndImportMedia(nodeDir)

Выбирает и импортирует медиафайл:

- Делегирует вызов репозиторию

### importMediaToNode(srcPath, nodeDir)

Импортирует медиафайл в узел:

- Делегирует вызов репозиторию

### resolveMediaPath(relPath)

Разрешает путь к медиафайлу:

- Делегирует вызов репозиторию

### deleteMedia(relPath)

Удаляет медиафайл:

- Делегирует вызов репозиторию

### getMediaPreview(relPath)

Получает превью медиафайла:

- Нормализует путь к файлу
- Возвращает URL протокола likbez:// для превью
- Возвращает null для пустого пути

### listNodeMedia(nodeDir)

Получает список медиафайлов узла:

- Делегирует вызов сканеру

### listMediaFiles()

Получает список всех медиафайлов:

- Делегирует вызов сканеру

### getMediaInfo(relPath)

Получает информацию о медиафайле:

- Делегирует вызов сканеру

### cleanupUnusedMedia(usedPaths)

Очищает неиспользуемые медиафайлы:

- Делегирует вызов сканеру

### getNodeMedia(nodeDir)

Получает медиафайлы узла:

- Делегирует вызов сканеру

## Компоненты

### MediaRepository

Отвечает за операции с медиафайлами (открытие, импорт, удаление).

### MediaScanner

Отвечает за сканирование и получение информации о медиафайлах.

## Импорты

- MediaRepository из ./mediaRepository: репозиторий медиафайлов
- MediaScanner из ./mediaScanner: сканер медиафайлов