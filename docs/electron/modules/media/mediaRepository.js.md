# modules/media/mediaRepository.js

## Описание

Репозиторий медиафайлов Electron приложения Likbez. Отвечает за операции с медиафайлами, включая открытие, импорт, разрешение путей и удаление файлов.

## Основные функции

### constructor()

Инициализирует репозиторий медиафайлов:

- Получает путь к корневой директории данных

### openMedia(relPath)

Открывает медиафайл во внешнем приложении:

- Валидирует путь к файлу
- Определяет абсолютный путь к файлу
- Проверяет существование файла
- Открывает файл во внешнем приложении с помощью shell.openPath
- Возвращает результат операции (true/false)

### chooseAndImportMedia(nodeDir)

Выбирает и импортирует медиафайл:

- Открывает диалог выбора файла с фильтрами медиафайлов
- Обрабатывает отмену выбора
- Копирует выбранный файл в директорию узла при необходимости
- Возвращает информацию о импортированном файле

### importMediaToNode(srcPath, nodeDir)

Импортирует медиафайл в узел:

- Проверяет существование исходного файла
- Создает директорию узла при необходимости
- Копирует файл в директорию узла с именем media.расширение
- Возвращает относительный путь и имя файла

### resolveMediaPath(relPath)

Разрешает путь к медиафайлу:

- Для относительных путей возвращает абсолютный путь в dataRoot
- Для абсолютных путей возвращает их без изменений
- Возвращает пустую строку для пустого пути

### deleteMedia(relPath)

Удаляет медиафайл:

- Валидирует путь к файлу
- Определяет абсолютный путь к файлу
- Проверяет существование файла
- Удаляет файл с помощью fs.unlink
- Возвращает результат операции (true/false)

## Поддерживаемые форматы

- Изображения: png, jpg, jpeg, gif, webp
- Видео: mp4, webm, ogg
- Документы: pdf, txt

## Импорты

- path: модуль для работы с путями файловой системы
- fs: модуль для работы с файловой системой
- fsp: промисы для работы с файловой системой
- dialog, shell из electron: диалоги и shell операции
- FileUtils, ValidationUtils из ../utils: утилиты для работы с файлами и валидации