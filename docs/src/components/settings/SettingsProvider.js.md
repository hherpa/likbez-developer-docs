# SettingsProvider Component Documentation

## Описание
SettingsProvider - это компонент контекста React, который предоставляет глобальное состояние настроек приложения. Компонент управляет настройками уровней и темы, обеспечивает их сохранение и загрузку через Electron API.

## Экспортируемые компоненты
- `SettingsProvider` - провайдер контекста настроек
- `useSettings` - хук для доступа к контексту настроек

## Структура компонента
1. **Контекст React**:
   - `SettingsContext` - контекст для предоставления настроек

2. **Состояние**:
   - `levels` - массив уровней узлов
   - `theme` - текущая тема приложения
   - `isInitialized` - флаг инициализации

3. **Эффекты**:
   - Загрузка настроек из Electron при монтировании
   - Сохранение настроек в Electron при изменении

4. **Функции управления уровнями**:
   - Добавление, удаление, обновление уровней
   - Изменение порядка уровней
   - Получение уровней по индексу и соседних уровней

## Взаимодействия
- Использует `useElectron` для доступа к API Electron
- Загрузка настроек при инициализации через `electronAPI.readData`
- Сохранение настроек при изменении через `electronAPI.writeData`
- Предоставляет хук `useSettings` для доступа к контексту настроек
- Обрабатывает миграцию со старого формата данных

## Зависимости
- React (createContext, useContext, useState, useEffect)
- `useElectron` из '../../core/providers/ElectronProvider'

## Архитектура
Компонент реализует паттерн Provider из React Context API для централизованного управления настройками приложения. Использует состояние для хранения настроек уровней и темы. Реализована система автоматической загрузки и сохранения настроек через Electron API с обработкой ошибок. Компонент предоставляет полный набор функций для управления уровнями, включая добавление, удаление, переименование и изменение порядка. Реализована валидация операций (например, запрет удаления последнего уровня). Хук `useSettings` обеспечивает типобезопасный доступ к контексту с проверкой на наличие провайдера в дереве компонентов.