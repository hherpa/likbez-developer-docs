# Документация для файла src/components/diagram/node/index.js

## 1. Назначение файла

Файл `src/components/diagram/node/index.js` является точкой экспорта для всех компонентов, связанных с узлами диаграммы. Он предоставляет централизованный интерфейс для импорта всех необходимых элементов узлов диаграммы, включая базовые компоненты, конфигурации, стили и логику обработки соединений.

## 2. Экспортируемые компоненты и классы

Файл экспортирует следующие компоненты и классы:

### Из BaseNode:
- `BaseNode` - главный компонент узла диаграммы
- `BaseNodeConfig` - класс конфигурации узла
- `BaseNodeStyles` - класс стилей узла
- `BaseNodeWrapper` - обертка для интеграции с ReactFlow
- `useBaseNodeConfig` - хук для создания конфигурации узла

### Из BaseNodeHandles:
- `BaseNodeHandles` - класс для управления стандартными handles узлов
- `DEFAULT_HANDLE_POSITIONS` - дефолтные позиции handles
- `DEFAULT_HANDLE_STYLES` - дефолтные стили handles

### Из BaseNodeEdges:
- `DEFAULT_EDGE_OPTIONS` - дефолтные опции для edges
- `EDGE_COLORS` - цвета для edges
- `useNodeEdges` - хук для управления соединениями узлов

## 3. Структура экспорта

Файл использует именованный экспорт с группировкой по функциональным модулям:

```javascript
// Экспорт компонентов BaseNode
export { 
  BaseNode, 
  BaseNodeConfig, 
  BaseNodeStyles,
  BaseNodeWrapper, 
  useBaseNodeConfig 
} from './BaseNode';

// Экспорт компонентов handles
export { 
  BaseNodeHandles,
  DEFAULT_HANDLE_POSITIONS,
  DEFAULT_HANDLE_STYLES
} from './BaseNodeHandles';

// Экспорт компонентов edges
export { 
  DEFAULT_EDGE_OPTIONS,
  EDGE_COLORS,
  useNodeEdges
} from './BaseNodeEdges';
```

## 4. Взаимодействие с другими компонентами

### Внутренние зависимости:
- `./BaseNode` - основной компонент узла
- `./BaseNodeHandles` - логика handles узлов
- `./BaseNodeEdges` - логика соединений между узлами

### Внешние зависимости:
- `react` - для создания React-компонентов
- `reactflow` - для работы с диаграммами
- `../../../core/hooks/storage/useTheme` - для получения темы оформления
- `../../editor/system/renders` - для рендеринга содержимого узлов
- `../../editor/system/parser` - для парсинга содержимого узлов

## 5. Используемые зависимости

### Основные зависимости:
1. **React** - библиотека для создания пользовательских интерфейсов
2. **ReactFlow** - библиотека для создания интерактивных диаграмм
3. **Внутренние модули приложения**:
   - Система рендеринга редактора
   - Система парсинга содержимого
   - Хуки управления темой

### Архитектурные особенности:
- Используется принцип разделения ответственности (SoC):
  - `BaseNodeConfig` отвечает за конфигурацию
  - `BaseNodeStyles` отвечает за стили
  - `BaseNodeHandles` отвечает за логику handles
  - `BaseNodeEdges` отвечает за логику соединений
- Применяется мемоизация для оптимизации производительности
- Используется централизованный парсер содержимого
- Реализована поддержка темной/светлой темы оформления

### Особенности реализации:
- Поддержка кастомизации размеров узлов
- Гибкая система цветов в зависимости от тегов
- Адаптивные стили для разных состояний (выбранный узел, темная тема)
- Поддержка кастомных handle-элементов в содержимом узла
- Плавные анимации при изменении состояний