# EditableElement.js

## Назначение
Главный компонент для редактируемого элемента в превью режиме редактора, координирующий работу подкомпонентов и UI компонентов для редактирования элемента.

## Экспортируемые компоненты
- `EditableElement` - основной компонент редактируемого элемента

## Структура
1. Импорты React, хуков, компонентов и утилит
2. Компонент `EditableElement` с пропсами:
   - `element` - элемент для редактирования
   - `originalContent` - оригинальный контент
   - `elementPosition` - позиция элемента
   - `onChange` - функция изменения контента
   - `darkMode` - флаг темного режима
   - `children` - дочерние элементы
   - `elementType` - тип элемента
3. Обработчики для FloatingToolbar:
   - `handleInsertMarkdown` - обработчик вставки markdown
   - `handleInsertElement` - обработчик вставки элемента
4. Стили контейнера
5. Рендеринг компонента

## Взаимодействия
1. Использует React хуки
2. Работает с useEditableElement хуком для управления состоянием редактирования
3. Использует EditableContent для редактирования контента
4. Использует FloatingToolbar для вставки элементов
5. Работает с ElementClassifier для определения типа элемента
6. Использует window.getSelection для получения выделения
7. Принимает и передает различные пропсы для управления состоянием

## Зависимости
- React
- `useEditableElement` - хук для управления состоянием редактирования
- `EditableContent` - компонент редактируемого контента
- `ElementClassifier` - для классификации элементов
- `FloatingToolbar` - компонент плавающего тулбара
- `Logger` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за координацию UI компонентов для редактирования элемента. Использует композицию с другими компонентами и хуками.

Компонент `EditableElement` реализует логику:
1. Использует useEditableElement хук для управления состоянием редактирования
2. Определяет обработчики для FloatingToolbar:
   - `handleInsertMarkdown` получает выделенный текст и вызывает handleToolbarInsertMarkdown
   - `handleInsertElement` получает выделенный текст и вызывает handleToolbarInsertElement
3. Определяет стили контейнера с учетом состояния редактирования
4. Рендерит компонент:
   - В режиме редактирования отображает EditableContent и FloatingToolbar
   - В обычном режиме отображает children
5. Передает необходимые пропсы подкомпонентам:
   - EditableContent получает ref, значение, обработчики и флаги
   - FloatingToolbar получает состояние видимости, позицию и обработчики