# ContentSync.js

## Назначение
Модуль для синхронизации markdown строки с текстом из contentEditable элемента в редакторе.

## Экспортируемые компоненты
- `syncMarkdownWithContentEditable` - основная функция синхронизации

## Структура
1. Импорты утилит и логгера
2. Функция `syncMarkdownWithContentEditable` для синхронизации markdown строки с contentEditable

## Взаимодействия
1. Принимает строку markdown и contentEditable элемент
2. Получает текст из contentEditable
3. Сравнивает тексты с учетом LaTeX элементов
4. При необходимости обновляет markdown строку
5. Возвращает результат синхронизации

## Зависимости
- `ContentEditableUtils.js` - для получения текста из contentEditable
- `Logger.js` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за синхронизацию markdown строки с contentEditable.

Функция `syncMarkdownWithContentEditable` реализует логику:
1. Проверяет наличие contentEditable элемента
2. Получает текст из contentEditable
3. Проверяет наличие текста в contentEditable
4. Извлекает текст из markdown без LaTeX элементов для сравнения
5. Удаляет префиксы заголовков из markdown для сравнения
6. Сравнивает тексты без учета LaTeX синтаксиса
7. Если тексты совпадают, синхронизация не нужна
8. Сохраняет префикс markdown (для заголовков)
9. Проверяет наличие LaTeX элементов в markdown
10. Если есть LaTeX элементы, синхронизация пропускается для защиты синтаксиса
11. Обновляет markdown строку, чтобы она соответствовала contentEditable
12. Возвращает результат синхронизации (synced: true/false, newLine: обновленная строка)