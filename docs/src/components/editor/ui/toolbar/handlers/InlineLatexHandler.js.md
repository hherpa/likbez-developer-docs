# InlineLatexHandler.js

## Назначение
Обработчик inline LaTeX элементов в редакторе, отвечающий за вставку и управление inline LaTeX формулами.

## Экспортируемые компоненты
- `handleInlineLatex` - основная функция обработки inline LaTeX элементов

## Структура
1. Функция `handleInlineLatex` для обработки вставки inline LaTeX элементов

## Взаимодействия
1. Принимает тип элемента, контент, элемент contentEditable, целевую строку и массив строк
2. Синхронизирует markdown с contentEditable
3. Строит текст для вставки LaTeX элемента
4. Проверяет, находится ли выделенный текст внутри существующего LaTeX элемента
5. Удаляет выделенный текст из строки
6. Вставляет LaTeX элемент в строку

## Зависимости
- `TextRemover.js` - для удаления текста из markdown
- `ElementInserter.js` - для построения текста вставки
- `ContentSync.js` - для синхронизации markdown с contentEditable
- `Logger.js` - для логирования

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за обработку inline LaTeX элементов. Вставляет LaTeX в текущую строку, а не в новую.

Функция `handleInlineLatex` реализует логику:
1. Синхронизирует markdown с contentEditable
2. Строит текст для вставки LaTeX элемента
3. Обрабатывает случаи отсутствия контента
4. Проверяет, находится ли выделенный текст внутри существующего LaTeX элемента
5. Если текст внутри LaTeX, заменяет содержимое существующего элемента
6. Если текст не внутри LaTeX, удаляет выделенный текст из строки
7. Вставляет LaTeX элемент в строку
8. Обрабатывает различные случаи вставки (пустая строка, конец строки и т.д.)