# ParserCore.js

## Общее описание
Файл `ParserCore.js` содержит основной класс `Parser` для парсинга контента в редакторе. Класс использует принцип разделения ответственности, делегируя различные аспекты парсинга специализированным компонентам. Также экспортирует глобальный экземпляр парсера и вспомогательные функции для удобства использования.

## Класс Parser

### Конструктор
```javascript
constructor(dependencies = {}, config = PARSER_CONFIG)
```

Создает экземпляр парсера с возможностью внедрения зависимостей и настройки конфигурации.

**Параметры:**
- `dependencies` (Object): Объект с зависимостями для внедрения
  - `markdownParser`: Парсер markdown элементов
  - `contentCleaner`: Очиститель контента
  - `cacheManager`: Менеджер кэширования
  - `resultBuilder`: Строитель результатов
- `config` (Object): Конфигурация парсера (по умолчанию `PARSER_CONFIG`)

### Методы

#### parse(content)
Основной метод парсинга контента.

**Параметры:**
- `content` (string): Контент для парсинга

**Возвращает:**
- `Object`: Полная структура парсенных данных

**Процесс:**
1. Проверяет входные данные
2. Проверяет наличие результата в кэше
3. Выполняет парсинг контента через `performParsing`
4. Сохраняет результат в кэш
5. Возвращает результат

#### performParsing(content)
Выполняет непосредственный парсинг контента.

**Параметры:**
- `content` (string): Контент для парсинга

**Возвращает:**
- `Object`: Результат парсинга

**Процесс:**
1. Извлекает все элементы через `extractAllElements`
2. Очищает контент от специальных тегов через `contentCleaner`
3. Парсит markdown элементы через `markdownParser`
4. Получает цвета элементов через `getElementColors`
5. Строит результат через `resultBuilder`

#### clearCache()
Очищает кэш парсера.

#### getCacheStats()
Получает статистику кэша.

**Возвращает:**
- `Object`: Статистика кэша

## Экспорты

### markdownParser
Глобальный экземпляр парсера, созданный по умолчанию.

### parseContent(content)
Удобная функция для парсинга контента через глобальный экземпляр.

### clearParserCache()
Удобная функция для очистки кэша глобального экземпляра.

### getParserStats()
Удобная функция для получения статистики кэша глобального экземпляра.

## Зависимости
- `PARSER_CONFIG` из `./ParserConfig.js`
- `MarkdownParser` из `../content/MarkdownParser.js`
- `ContentCleaner` из `../content/ContentCleaner.js`
- `CacheManager` из `./CacheManager.js`
- `extractAllElements` из `./ElementExtractor.js`
- `getElementColors` из `./ColorResolver.js`
- `ResultBuilder` из `../content/ResultBuilder.js`

## Использование
Класс `Parser` является центральным компонентом системы парсинга редактора. Он координирует работу всех вспомогательных компонентов и обеспечивает эффективную обработку контента с использованием кэширования.