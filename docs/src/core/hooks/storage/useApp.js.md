# useApp.js

## Обзор

Пользовательский React хук для управления глобальным состоянием приложения, в частности тегами категорий. Обеспечивает централизованное хранение и обновление тегов категорий.

## Назначение

useApp отвечает за:
- Управление состоянием тегов категорий
- Предоставление функций для обновления тегов
- Мемоизацию значений для оптимизации производительности

## Зависимости

Хук использует следующие модули и хуки:
- `useState` из React - для управления локальным состоянием
- `useMemo` из React - для мемоизации возвращаемого значения
- `useCallback` из React - для мемоизации функций обновления

## Возвращаемое значение

Хук возвращает объект со следующими свойствами:

### Состояние тегов
- `categoryTags` - объект с тегами категорий, где ключ - идентификатор, значение - объект { tag, color }
- `setCategoryTags` - функция для установки всех тегов категорий

### Функции обновления
- `updateCategoryTag` - функция для обновления отдельного тега категории

```javascript
const value = useMemo(() => ({
  categoryTags,
  setCategoryTags,
  updateCategoryTag,
}), [categoryTags, updateCategoryTag]);
```

!> Используется мемоизация для оптимизации производительности

## Логика работы

### Инициализация состояния
Хук инициализирует начальное состояние тегов:
```javascript
const [categoryTags, setCategoryTags] = useState({});
```

### updateCategoryTag
Функция для обновления отдельного тега категории:
```javascript
const updateCategoryTag = useCallback((id, tag, color) => {
  setCategoryTags(prev => ({ ...prev, [id]: { tag, color } }));
}, []);
```

!> Используется мемоизация для оптимизации производительности
!> Функция заменяет весь объект тега, а не обновляет отдельные свойства

## Использование

Хук используется в AppProvider для предоставления контекста тегов:
```javascript
const value = useApp();
```

### Доступ к тегам
```javascript
const { categoryTags, setCategoryTags, updateCategoryTag } = useAppContext();
```

### Обновление тега
```javascript
// Обновить отдельный тег
updateCategoryTag('tag1', 'Важное', '#ff0000');

// Установить все теги
setCategoryTags({
  'tag1': { tag: 'Важное', color: '#ff0000' },
  'tag2': { tag: 'Заметки', color: '#00ff00' }
});
```

## Интеграция с другими компонентами

### AppProvider
Используется в AppProvider для предоставления контекста:
```javascript
const value = useApp();
return (
  <AppContext.Provider value={value}>
    {children}
  </AppContext.Provider>
);
```

## Принципы работы

1. **Централизация** - вся логика управления тегами в одном хуке
2. **Оптимизация** - использование useMemo и useCallback для предотвращения лишних перерисовок
3. **Гибкость** - поддержка различных сценариев обновления тегов
4. **Совместимость** - совместимость с React Context

## Особенности реализации

!> При обновлении отдельного тега заменяется весь объект тегов, что может быть неэффективным при большом количестве тегов
!> Отсутствует валидация передаваемых значений тегов
!> Не предусмотрена обработка ошибок при обновлении тегов
!> Жестко закодированная структура объекта тега { tag, color }
!> Отсутствует возможность удаления отдельных тегов