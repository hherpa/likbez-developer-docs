# useAppData.js

## Обзор

Пользовательский React хук для подготовки данных приложения, централизующий логику подготовки доступных тегов и узлов для использования в редакторе и других компонентах.

## Назначение

useAppData отвечает за:
- Подготовку списка доступных тегов из контекста приложения
- Подготовку списка доступных узлов из контекста диаграммы
- Централизацию логики подготовки данных для UI компонентов

## Зависимости

Хук использует следующие контексты и хуки:
- `useAppContext` из `../../providers` - для получения тегов категорий
- `useFlowContext` из `../../providers` - для получения узлов диаграммы
- `useMemo` из React - для мемоизации вычислений

## Возвращаемое значение

Хук возвращает объект с двумя свойствами:

### availableTags
Массив строк, содержащий все доступные теги из категории тегов:
```javascript
const availableTags = useMemo(() => {
  return Object.values(categoryTags || {})
    .map(tag => tag.tag)
    .filter(Boolean);
}, [categoryTags]);
```

!> Используется мемоизация для оптимизации производительности
!> Фильтрация удаляет пустые значения тегов

### availableNodes
Массив объектов, содержащий информацию о доступных узлах:
```javascript
const availableNodes = useMemo(() => {
  return nodes.map(node => ({
    id: node.id,
    title: node.data?.title || node.id
  }));
}, [nodes]);
```

Каждый объект содержит:
- `id` - идентификатор узла
- `title` - заголовок узла (из данных узла или идентификатор если заголовок отсутствует)

!> Используется мемоизация для оптимизации производительности
!> В случае отсутствия заголовка используется идентификатор узла

## Использование

Хук используется в основном компоненте App.js:
```javascript
const { availableTags, availableNodes } = useAppData();
```

Затем данные передаются в компонент редактора:
```jsx
<NodeEditor
  availableTags={availableTags}
  availableNodes={availableNodes}
  // ... другие props
/>
```

## Принципы работы

1. **Централизация** - вся логика подготовки данных в одном месте
2. **Оптимизация** - использование useMemo для предотвращения лишних вычислений
3. **Безопасность** - обработка случаев отсутствия данных
4. **Гибкость** - подготовка данных в формате, удобном для использования в UI

## Особенности реализации

!> Жестко закодированная логика извлечения заголовка из `node.data?.title` может потребовать изменения при изменении структуры данных узлов
!> Фильтрация пустых тегов может скрыть ошибки в данных