# ParagraphUtils.js

## Назначение
Утилиты для обновления параграфов в редакторе, обеспечивающие обработку и обновление строк параграфов с учетом LaTeX элементов.

## Экспортируемые компоненты
- `updateParagraphLine` - функция обновления строки параграфа

## Структура
1. Функция `updateParagraphLine` для обновления строки параграфа

## Взаимодействия
1. Принимает новый текст, массив строк и индекс целевой строки
2. Проверяет наличие LaTeX элементов в текущей строке
3. Защищает LaTeX элементы от перезаписи
4. Разбивает новый текст на строки
5. Обновляет строки в массиве в зависимости от количества строк

## Зависимости
- Нет внешних зависимостей

## Архитектура
Следует принципу единственной ответственности (SRP), отвечая только за обновление параграфов.

Функция `updateParagraphLine` реализует логику:
1. Получает текущую строку из массива
2. Проверяет наличие LaTeX элементов в строке
3. Если есть LaTeX элементы:
   - Извлекает содержимое LaTeX элементов
   - Сравнивает с новым текстом
   - Если совпадают, не обновляет (защита LaTeX)
4. Разбивает новый текст на строки по переносам
5. В зависимости от количества строк:
   - Одна строка: обновляет целевую строку
   - Несколько строк: обновляет первую строку и вставляет остальные
   - Нет строк: очищает целевую строку