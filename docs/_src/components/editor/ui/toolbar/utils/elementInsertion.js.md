# elementInsertion.js

## Назначение
Утилита для вставки элементов синтаксиса в текстовое поле редактора с использованием стратегий.

## Экспортируемые компоненты
- `insertElement` - основная функция вставки элементов

## Структура
1. Импорты констант
2. Стратегии вставки элементов:
   - `handleNameStrategy` - для handle и name элементов
   - `colorStrategy` - для цветовых элементов
   - `backgroundColorStrategy` - для элементов фонового цвета
   - `templateStrategy` - для элементов с шаблонами
   - `defaultStrategy` - стратегия по умолчанию
3. Функция `getElementInsertionStrategy` для выбора стратегии
4. Основная функция `insertElement`

## Взаимодействия
1. Принимает textarea элемент, тип элемента, контент и функцию onChange
2. Определяет позицию курсора и выделение
3. Разбивает контент на части до и после курсора
4. Выбирает стратегию вставки в зависимости от типа элемента
5. Применяет стратегию и получает результат
6. Вызывает onChange с новым контентом
7. Устанавливает позицию курсора после вставленного элемента

## Зависимости
- `../../../constants` - для получения шаблонов, текстов по умолчанию и поддерживаемых цветов

## Архитектура
Использует паттерн стратегия для обработки различных типов элементов. Каждая стратегия отвечает за определенный тип элементов:
- `handleNameStrategy` обрабатывает handle и name элементы, добавляя переносы строк при необходимости
- `colorStrategy` обрабатывает цветовые элементы с использованием шаблонов
- `backgroundColorStrategy` обрабатывает элементы фонового цвета
- `templateStrategy` обрабатывает элементы с заданными шаблонами
- `defaultStrategy` используется для элементов без специальной обработки

Функция `insertElement` реализует логику:
1. Проверяет наличие textarea
2. Фокусируется на textarea
3. Определяет позицию курсора и выделение
4. Разбивает контент на части до и после курсора
5. Выбирает стратегию вставки
6. Применяет стратегию и получает результат
7. Вызывает onChange с новым контентом
8. Устанавливает позицию курсора после вставленного элемента