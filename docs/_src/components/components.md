# Архитектура Components модуля приложения Likbez

## Общая архитектура

Components модуль приложения Likbez содержит все визуальные компоненты приложения, включая диаграммы, редактор, настройки и боковую панель. Модуль построен по принципам компонентной архитектуры React с четким разделением ответственности между различными частями приложения.

Архитектура модуля состоит из четырех основных частей:

1. **Диаграммы** - компоненты для визуализации узлов и связей между ними
2. **Редактор** - компоненты для редактирования содержимого узлов
3. **Настройки** - компоненты для управления настройками приложения
4. **Боковая панель** - компоненты для навигации и управления файлами

## Структура проекта

```
src/components/
├── diagram/     # Компоненты диаграмм
│   ├── node/    # Компоненты узлов диаграммы
│   └── index.js # Экспорт компонентов диаграмм
│
├── editor/     # Компоненты редактора
│   ├── constants/ # Константы редактора
│   ├── system/    # Системные компоненты редактора
│   ├── ui/        # UI компоненты редактора
│   └── index.js   # Экспорт компонентов редактора
│
├── settings/   # Компоненты настроек
│   ├── style/  # Стили компонентов настроек
│   └── index.js # Экспорт компонентов настроек
│
└── sidebar/    # Компоненты боковой панели
    ├── style/  # Стили компонентов боковой панели
    └── index.js # Экспорт компонентов боковой панели

## Основные компоненты

### Диаграммы (diagram/)

Каталог `diagram/` содержит компоненты для визуализации узлов и связей между ними:

- `node/` - компоненты базового узла диаграммы, включая стили, конфигурацию и обработчики. Главный компонент `BaseNode.js` использует новую архитектуру рендереров для отображения содержимого узла.
- `index.js` - экспорт компонентов диаграмм

!> Необходимо обеспечить правильную визуализацию узлов и связей между ними

### Редактор (editor/)

Каталог `editor/` содержит компоненты для редактирования содержимого узлов:

- `constants/` - константы, используемые в редакторе, включая кнопки, настройки, шаблоны и UI элементы
- `system/` - системные компоненты редактора, включая парсеры и рендереры. Содержит две основные подсистемы:
  - `parser/` - парсеры для извлечения элементов из markdown контента
  - `renders/` - рендереры для отображения элементов в узлах
- `ui/` - UI компоненты редактора, включая панели инструментов, вкладки, текстовые области и меню
- `index.js` - экспорт компонентов редактора

!> Важно обеспечить корректную работу всех компонентов редактора для правильного отображения содержимого узлов

### Настройки (settings/)

Каталог `settings/` содержит компоненты для управления настройками приложения:

- `SettingsProvider.js` - провайдер настроек, управляющий уровнями и темой приложения
- `SettingsMenu.js` - меню настроек с вкладками для управления уровнями
- `LevelSettings.js` - компонент для управления настройками уровней
- `LevelsTab.js` - вкладка для управления уровнями в настройках
- `style/` - стили компонентов настроек
- `index.js` - экспорт компонентов настроек

!> Необходимо обеспечить интуитивно понятный интерфейс для управления настройками приложения

### Боковая панель (sidebar/)

Каталог `sidebar/` содержит компоненты для навигации и управления файлами:

- `Sidebar.js` - главный компонент боковой панели, содержащий кнопки создания узлов, кнопку возврата и проводник файлов
- `DropButton.js` - кнопка для создания новых узлов с поддержкой drag & drop
- `BackButton.js` - кнопка для возврата на предыдущий уровень
- `FileExplorer.js` - проводник файлов для навигации по узлам
- `style/` - стили компонентов боковой панели
- `index.js` - экспорт компонентов боковой панели

!> Важно обеспечить удобную навигацию и управление файлами через боковую панель

## Интеграция с Core модулем

Components модуль тесно интегрирован с Core модулем через React Context провайдеры и кастомные хуки. Компоненты диаграмм используют `FlowProvider` и `NavigationProvider` для управления состоянием узлов и навигацией. Компоненты редактора используют различные хуки из Core для управления состоянием редактора, загрузки изображений и других функций.

!> Необходимо следить за правильной интеграцией с Core модулем для обеспечения корректной работы приложения

## Разработка и отладка

В процессе разработки components модуля:

- Используются современные возможности JavaScript (ES6+)
- Следуются принципы компонентной архитектуры React
- Обеспечивается типобезопасность (при использовании TypeScript в будущем)
- Соблюдаются принципы разделения ответственности между компонентами

## Зависимости

Components модуль зависит от следующих библиотек:

- React и React DOM
- React Context API
- ReactFlow для визуализации узлов
- Core модуль приложения

!> Необходимо следить за совместимостью версий зависимостей

## Тестирование

Компоненты components модуля должны покрываться unit-тестами. Рекомендуется использовать Jest и React Testing Library для написания тестов.

## Производительность

При разработке components модуля следует учитывать:

- Минимизацию перерендеров компонентов
- Эффективное управление состоянием
- Оптимизацию компонентов с помощью React.memo
- Ленивую загрузку компонентов при необходимости