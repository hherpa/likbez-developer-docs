# FileExplorer Component Documentation

## Описание
FileExplorer - это компонент файлового проводника, который отображает иерархическую структуру узлов в виде дерева. Компонент позволяет пользователю навигировать по узлам, раскрывать/сворачивать папки и переходить к выбранным узлам двойным кликом.

## Экспортируемые компоненты
- `FileExplorer` - основной компонент файлового проводника

## Структура компонента
1. **Заголовок**:
   - Иконка папки и заголовок "Files"
   - Кнопка обновления дерева файлов

2. **Дерево файлов**:
   - Список узлов в виде иерархической структуры
   - Узлы с дочерними элементами могут раскрываться/сворачиваться
   - Визуальные индикаторы уровня вложенности
   - Цветовая индикация уровней

3. **Элементы дерева**:
   - Иконки папок (открытые/закрытые) и файлов
   - Название узла
   - Метки уровней
   - Линии отступов для визуализации иерархии

## Взаимодействия
- Использует `useElectron` для доступа к данным узлов
- Использует `useSettings` для получения информации об уровнях
- Загрузка дерева файлов при монтировании и при обновлении
- Управление состоянием раскрытых папок (expandedFolders)
- Обработчики:
  - `toggleFolder` - переключение раскрытия папки
  - `handleDoubleClick` - переход к узлу по двойному клику
  - `loadFileTree` - обновление дерева файлов
- Построение дерева из данных subLevels
- Генерация цветов для уровней с учетом темы (светлая/темная)

## Зависимости
- React (useState, useEffect, useMemo)
- `useElectron` из '../../core/providers/ElectronProvider'
- `useSettings` из '../settings/SettingsProvider'
- `Icons` из './style/Icons'
- CSS стили из './style/FileExplorer.css'

## Архитектура
Компонент реализует паттерн функционального компонента React с использованием хуков для управления состоянием и побочными эффектами. Компонент инкапсулирует всю логику построения и отображения иерархической структуры узлов. Использует рекурсивный подход для построения дерева из плоской структуры данных subLevels. Реализована система управления раскрытием папок с использованием Set для эффективного хранения состояния. Компонент поддерживает темизацию и адаптирует цветовую схему в зависимости от текущей темы. Визуализация иерархии осуществляется через отступы и вертикальные линии. Компонент следует принципам композиции React, предоставляя гибкий интерфейс через пропсы для интеграции с системой навигации.